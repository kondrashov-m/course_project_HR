# JSON База Данных HRSystem

## Описание

Все данные HR системы (сотрудники, зарплаты, отпуска) теперь сохраняются в единственный JSON файл: **hrdb.json**

## Структура БД

Файл `hrdb.json` содержит полную структуру всех данных:

```json
{
  "employees": [
    {
      "id": 1,
      "firstName": "Иван",
      "lastName": "Петров",
      "positionName": "Разработчик",
      "departmentName": "IT отдел",
      "baseSalary": 100000,
      "hireDate": "2026-01-19T10:30:00"
    }
  ],
  "salaries": [
    {
      "id": 1,
      "employeeId": 1,
      "baseSalary": 100000,
      "bonus": 5000,
      "deductions": 1000,
      "totalSalary": 104000,
      "paymentDate": "2026-01-19T10:30:00"
    }
  ],
  "vacations": [
    {
      "id": 1,
      "employeeId": 1,
      "startDate": "2026-02-01T00:00:00",
      "endDate": "2026-02-14T00:00:00",
      "reason": "Отпуск",
      "status": "В ожидании"
    }
  ],
  "nextEmployeeId": 2,
  "nextSalaryId": 2,
  "nextVacationId": 2
}
```

## Местоположение

Файл `hrdb.json` находится в папке с выполняемым файлом:
- Debug: `bin/Debug/net7.0/hrdb.json`
- Release: `bin/Release/net7.0/hrdb.json`

## Особенности

✅ **Единая база данных** - все данные хранятся в одном JSON файле
✅ **Автоматическое сохранение** - данные сохраняются при каждом изменении
✅ **Автоматическая загрузка** - данные загружаются при запуске приложения
✅ **UTF-8 кодировка** - поддержка русских символов
✅ **Структурированность** - красиво отформатированный JSON

## Операции с БД

### Когда происходит сохранение?

1. Добавление нового сотрудника
2. Обновление информации сотрудника
3. Удаление сотрудника
4. Добавление записи о зарплате
5. Обновление записи о зарплате
6. Удаление записи о зарплате
7. Добавление отпуска
8. Обновление отпуска
9. Удаление отпуска

### Архитектура репозитория

```
InMemoryRepository
├── Employees (в памяти)
├── Salaries (в памяти)
├── Vacations (в памяти)
└── LoadFromJson() / SaveToJson()
    └── hrdb.json (на диске)
```

## Преимущества

- **Простота** - просто JSON файл, легко читать вручную
- **Портативность** - файл можно легко скопировать или отправить
- **Быстрота** - JSON загружается в памяти для быстрого доступа
- **Надежность** - данные сохраняются на диск при каждом изменении

## Миграция со старого формата

Если у вас есть старый файл `employees.csv`, его можно импортировать в новый формат вручную или написать миграционный скрипт.
